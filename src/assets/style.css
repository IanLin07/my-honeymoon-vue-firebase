/* =========================
   Mobile First – Global UX
   ========================= */
:root{
  -webkit-tap-highlight-color: transparent; /* 手機點擊不出現藍色閃一下 */
  text-size-adjust: 100%;                   /* iOS 字體縮放更穩 */
}

html, body{
  height: 100%;
  overscroll-behavior-y: contain;           /* 避免整頁過度橡皮筋造成誤觸感 */
}

button, input, select, textarea{
  font: inherit;                            /* 避免 iOS/Android 表單字體不一致 */
}

/* ✅ 手機上：輸入欄/textarea 字體至少 16px，避免 iOS 自動放大 */
@media (max-width: 768px){
  .field-input,
  .acc-input,
  .note-textarea{
    font-size: 16px;
  }
}


* { box-sizing: border-box; }

body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", Arial, sans-serif;
  background:#f7f4ee;
  color:#18322b;
}

.app-shell{ min-height:100vh; display:flex; flex-direction:column; }

.app-header{ padding:14px 14px 8px 14px; }
.app-title{ font-size:22px; font-weight:800; letter-spacing:.3px; }
.app-subtitle{ margin-top:6px; font-size:12px; opacity:.7; }

.app-main{
  flex:1;
  padding:0 14px calc(130px + env(safe-area-inset-bottom)) 14px; /* ✅ 避免最後幾筆被底部 nav 蓋住 */
}

.page{ display:block; }

/* =============== Day Tabs =============== */
.day-tabs{
  display:flex; gap:10px; overflow-x:auto; padding:8px 2px 10px 2px;
  scrollbar-width:none;
  position: sticky;
  top: 0;
  z-index: 30;
  background: #f7f4ee; /* 你 body 的底色，避免滑動時透明疊影 */
}
.day-tabs::-webkit-scrollbar{ display:none; }

.day-chip{
  min-width:76px;
  border:2px solid rgba(0,0,0,.05);
  background:#fff;
  border-radius:16px;
  padding:10px;
  cursor:pointer;
  text-align:left;
  transition:transform .12s ease, background .12s ease;
}
.day-chip:active{ transform:scale(.98); }
.day-chip.active{
  background:#4fb6ff;
  border-color:rgba(79,182,255,.7);
  color:#fff;
}

/* ✅ 今天（未選中）：淡黃色提示 + 小徽章 */
.day-chip.today:not(.active){
  border-color: rgba(255, 193, 7, .55);
  background: rgba(255, 193, 7, .18);
}

/* ✅ 今天徽章（右上角） */
.day-chip.today{
  position: relative;
}
.day-chip.today::after{
  content: "Today";
  position: absolute;
  top: 6px;
  right: 8px;
  font-size: 10px;
  font-weight: 900;
  padding: 2px 6px;
  border-radius: 999px;
  background: rgba(255, 193, 7, .92);
  color: rgba(0,0,0,.85);
}

/* ✅ 今天且被選中：藍底上也要看得出來（加一圈亮邊） */
.day-chip.today.active{
  box-shadow: 0 0 0 2px rgba(255, 193, 7, .75) inset;
}
.day-chip.today.active::after{
  background: rgba(255,255,255,.92);
}

.chip-top{ font-size:11px; font-weight:800; opacity:.9; }
.chip-date{ margin-top:6px; font-size:18px; font-weight:900; line-height:1; }
.chip-weekday{ margin-top:6px; font-size:12px; opacity:.85; }

/* =============== Weather card =============== */
.weather-card{
  display:flex; gap:10px; align-items:stretch;
  background:#4fb6ff;
  border-radius:22px;
  padding:14px;
  box-shadow:0 10px 24px rgba(0,0,0,.08);
  color:#fff;
  margin:6px 0 14px 0;
}
.weather-left{ flex:1; min-width:0; }

/* ✅ 天氣：溫度區塊移到同一行，右側對齊到 metrics（含日出）的右緣 */
.weather-top{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
}

.weather-top-left{
  min-width:0;
}

.weather-temp{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  text-align:right;
  flex:0 0 auto;
}


.weather-right{ width:110px; display:flex; flex-direction:column; align-items:flex-end; }

.weather-city{ display:flex; gap:8px; align-items:center; font-weight:900; letter-spacing:.4px; opacity:.95; }
.weather-desc{ margin-top:6px; display:flex; gap:8px; align-items:center; }
.weather-title{ font-size:24px; font-weight:900; line-height:1.1; }
.weather-emoji{ font-size:18px; }

.weather-metrics{
  margin-top:10px;
  width: 100%;                 /* ✅ 確保吃滿容器寬度 */
  display:grid;
  grid-template-columns:repeat(3, minmax(0, 1fr)); /* ✅ 防止內容撐破，維持平均 */
  gap:8px;
}

.metric{
  min-width: 0;                /* ✅ 防止長字把格子撐歪 */
  background:rgba(255,255,255,.18);
  border-radius:14px;
  padding:10px;
  text-align:center;
}

.metric-value{ font-size:16px; font-weight:900; }
.metric-label{ margin-top:4px; font-size:11px; opacity:.9; }

.outfit-card{
  margin-top:10px;
  background:rgba(255,255,255,.9);
  color:#245a4f;
  border-radius:16px;
  padding:10px;
  display:flex; gap:10px; align-items:center;
}
.outfit-icon{
  width:34px; height:34px; border-radius:12px;
  background:rgba(79,182,255,.18);
  display:flex; align-items:center; justify-content:center;
  font-size:18px;
}
.outfit-title{ font-size:11px; font-weight:900; opacity:.8; }
.outfit-desc{ margin-top:2px; font-size:12px; font-weight:700; line-height:1.25; }

.temp-now{ font-size:44px; font-weight:1000; line-height:1; }
.temp-range{ margin-top:6px; font-size:12px; font-weight:800; opacity:.95; }

.countdown-text{
  margin-top:10px;
  font-weight:1000;
  font-size:13px;
  opacity:.95;
  background:rgba(255,255,255,.18);
  border-radius:14px;
  padding:10px;
}

.weather-loading,.weather-error{ margin-top:8px; font-size:12px; font-weight:700; opacity:.95; }

.day-title{ margin:10px 2px 10px 2px; font-size:16px; font-weight:900; }


/* =============== Event card =============== */
/* 外層：左時間軸 + 右卡片（卡片寬度會等於筆記寬度） */
.event-item{
  display:flex;
  gap:10px;
  align-items:stretch;
  margin-bottom:10px;
}



.time-text{
  font-weight:1000;
  font-size:14px;
  color:#245a4f;
  line-height:1;
}

.time-railbar{
  position:relative;
  width:18px;
  flex:1;
  margin-top:6px;
  display:flex;
  justify-content:center;
}

.time-dot{
  width:10px;
  height:10px;
  border-radius:999px;
  background:#4fb6ff;
  box-shadow:0 0 0 3px rgba(79,182,255,.18);
  z-index:2;
}

.time-line{
  position:absolute;
  top:14px;
  bottom:-12px;              /* 讓線稍微延伸到底部更像時間軸 */
  width:2px;
  background:rgba(0,0,0,.12);
  border-radius:999px;
  z-index:1;
}

/* 右側卡片堆疊（卡片 + note between 同寬） */
.event-stack{
  flex:1;
  min-width:0;
  display:grid;
  gap:10px;
}

/* 卡片本體 */
.event-card{
  background:#fff;
  border-radius:18px;
  padding:12px;
  box-shadow:0 8px 18px rgba(0,0,0,.06);
  margin-bottom:0;           /* ✅ 外層 event-item 已負責間距 */
}

/* 右側卡片內：標題 + 按鈕列（手機避免被擠出螢幕） */
/* 1. 外層容器：確保文字與按鈕永遠在同一列，不換行 */
.event-row {
  display: flex;
  gap: 12px;
  align-items: center; /* 讓按鈕對齊左邊兩行文字的中心點 */
  flex-wrap: nowrap;   /* 強制不換行，節省空間 */
  width: 100%;
}

/* 2. 文字區：負責標題與時間的上下排列 */
.event-body {
  flex: 1;
  min-width: 0;        /* 重要：允許文字區縮小，防止擠開按鈕 */
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* 3. 標題：修正消失的問題 */
.event-loc {
  font-size: 14px;
  font-weight: 900;
  color: #18322b;
  line-height: 1.25;

  /* 修正處：刪除 white-space: nowrap，改用以下設定來支援多行省略 */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2; /* 最多顯示 2 行，超過顯示 ... */
  overflow: hidden;
  word-break: break-all; /* 避免長英文/網址撐破 */
}

/* 4. 停留時間：確保文字橫向排列 */
.event-stay {
  font-size: 12px;
  font-weight: 700;
  opacity: 0.75;
  white-space: nowrap; /* 確保時間與圖示不拆行 */
}

/* 5. 按鈕區：固定在右側 */
.event-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;      /* 禁止按鈕被縮小 */
  align-items: center;
}

/* --- 注意：請刪除原本 420px 以下讓 .event-actions 變成 width: 100% 的那段 media query --- */




.note-panel{ margin-top:10px; border-radius:16px; background:#eaf2ff; padding:10px; }
.note-textarea{
  width:100%; min-height:150px; resize:vertical;
  border:2px solid rgba(36,90,79,.12);
  border-radius:14px; padding:10px;
  font-size:13px; outline:none; background:#fff;
}
.note-actions{ margin-top:10px; display:flex; gap:10px; justify-content:flex-end; }

.note-between{
  margin:0 10px0 12px 0;
  background:#eaf2ff;
  border:2px dashed rgba(79,182,255,.45);
  border-radius:16px;
  padding:12px;
}


.note-between-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.note-between-title{ font-weight:1000; font-size:12px; opacity:.8; }
.note-between-body{
  margin-top:6px;
  font-weight:800;
  font-size:13px;
  line-height:1.35;
  white-space:pre-wrap;
}

/* ✅ 行程卡片內：收合筆記延展到按鈕下方 */
.event-card .note-between{
  margin-top: 8px;
}

.event-card .note-between-body{
  padding: 10px 12px;
  border-radius: 16px;
  box-sizing: border-box;
}




/* =============== Cards / forms =============== */
.card{
  background:#fff;
  border-radius:20px;
  padding:14px;
  box-shadow:0 10px 24px rgba(0,0,0,.06);
  margin-bottom:12px;
}
.card-title{ font-size:16px; font-weight:1000; }
.card-subtitle{ margin-top:6px; font-size:12px; opacity:.7; font-weight:700; line-height:1.35; }

.form-grid{
  margin-top:12px;
  display:grid;

  /* ✅ iOS：讓欄位可以縮到欄寬內，避免 time/date/select 撐爆 */
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);

  gap:10px;
}

/* ✅ Grid 子項目允許縮（iOS 必備） */
.form-grid > *{
  min-width: 0;
}


.field{ display:block; }
.field-span{ grid-column:1 / -1; }
.field-label{ font-size:12px; font-weight:900; opacity:.75; margin-bottom:6px; }


.field-input{
  width:100%;
  box-sizing:border-box;
  max-width:100%;
  min-width:0;

  border-radius:14px;
  border:2px solid rgba(0,0,0,.06);
  padding:10px 12px;

  font-size:13px;
  line-height:22px;  /* ✅ iOS：避免文字上下被裁切 */
  outline:none;
  background:#fff;
}

/* ✅ 統一 input / select 高度（iOS 尤其重要） */
.field-input:not(textarea){
  height: 46px;
}

/* ✅ iOS 的 date/time 內建樣式最容易造成高度不一致 */
.field-input[type="date"],
.field-input[type="time"]{
  -webkit-appearance: none;
  appearance: none;
}


.row-right{ margin-top:12px; display:flex; gap:10px; justify-content:flex-end; }

.stay-grid{
  display:grid;

  /* ✅ iOS：select 會有內建最小寬度，minmax 才不會撐爆 */
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);

  gap:10px;
  align-items: stretch; /* ✅ 讓兩個 select 高度一致 */
}

.stay-grid > *{
  min-width: 0;
}




/* =============== Buttons =============== */

/* ✅ 手機可用性：可點擊區至少 44px（Apple HIG 常用基準） */
.btn,
.nav-item,
.day-chip,
.seg-btn,
.acc-pill,
.member-pill,
.filter-pill,
.icon-btn{
  min-height: 44px;
}



.btn{
  border:0;
  border-radius:14px;
  padding:10px 12px;
  font-weight:1000;
  cursor:pointer;
  transition:transform .12s ease, opacity .12s ease;
  touch-action: manipulation; /* ✅ 手機點擊更穩 */
}


.btn:active{ transform:scale(.98); }

.btn-primary{ background:#ffcf5a; color:#214c42; }
.btn-secondary{ background:rgba(36,90,79,.10); color:#245a4f; }
.btn-ghost{
  background:transparent;
  color:#245a4f;
  border:2px solid rgba(36,90,79,.14);
  padding:8px 10px;
}
.btn-danger{
  background:rgba(220,53,69,.14);
  color:#b02a37;
  border:2px solid rgba(220,53,69,.18);
}
.btn-mini{ padding:8px 10px; border-radius:12px; }

.btn-add-event{
  min-height: 48px;      /* ✅ 更好按 */
  padding: 12px 14px;    /* ✅ 比 btn-mini 更有份量 */
}



.loading{ margin-top:18px; font-weight:900; opacity:.75; }
.empty-state{
  margin:14px 2px;
  padding:14px;
  border-radius:18px;
  background:rgba(255,255,255,.75);
  font-weight:900;
  opacity:.75;
}

/* =============== Bottom nav =============== */
.bottom-nav{
  position:fixed;
  left:0; right:0; bottom:0;

  /* ✅ iPhone 安全區：底部高度要吃到 safe-area */
  height: calc(78px + env(safe-area-inset-bottom));

  background:rgba(255,255,255,.92);
  backdrop-filter: blur(10px);
  border-top:1px solid rgba(0,0,0,.06);

  display:grid;

  /* ✅ 底部 padding 也吃 safe-area，避免按鈕貼到底部手勢條 */
  padding:10px 10px calc(14px + env(safe-area-inset-bottom)) 10px;

  /* ✅ 關鍵：確保永遠在最上層（但仍低於 modal 50） */
  z-index: 40;

  /* ✅ 關鍵：確保可點擊（防止某些 overlay/容器怪問題） */
  pointer-events: auto;

  /* ✅ 手機點擊體感更穩（避免雙擊縮放/延遲） */
  touch-action: manipulation;
}

.nav-item{
  pointer-events: auto;
  touch-action: manipulation;
}


/* ✅ 讓手機點按更穩（避免 300ms 延遲/雙擊縮放干擾） */
.event-actions .btn{
  touch-action: manipulation;
}

/*.bottom-nav-4{ grid-template-columns:repeat(4,1fr); }*/
/*.bottom-nav-5{ grid-template-columns:repeat(5,1fr); }*/
.bottom-nav-6{ grid-template-columns:repeat(6,1fr); }
.bottom-nav-7{ grid-template-columns:repeat(7,1fr); }

.nav-item .nav-ico { font-size: 16px; line-height: 1; }
.nav-item .nav-txt { font-size: 11px; line-height: 1.1; white-space: nowrap; }

.nav-item{
  border:0;
  background:transparent;
  border-radius:18px;
  cursor:pointer;
  display:grid;
  place-items:center;
  gap:4px;
  padding:8px;
  transition:transform .12s ease, background .12s ease;
  position:relative;
  overflow:hidden;
}

/* 陰影脈衝（按下瞬間） */
.nav-item::after{
  content:"";
  position:absolute;
  inset:6px;
  border-radius:14px;
  opacity:0;
  box-shadow:0 10px 22px rgba(0,0,0,.18);
  transition:opacity .18s ease;
  pointer-events:none;
}
.nav-item:active::after{ opacity:1; }

/* 點擊後短促微彈（pulse class） */
.nav-item.pulse{
  animation: navPulse 240ms ease-out;
}

@keyframes navPulse{
  0%   { transform:scale(1); }
  35%  { transform:scale(.94); }
  100% { transform:scale(1); }
}

@media (prefers-reduced-motion: reduce){
  .nav-item.pulse{ animation:none; }
}


.nav-item:active{ transform:scale(.98); }
.nav-item.active{ background:rgba(79,182,255,.16); }
.nav-icon{ font-size:18px; }
.nav-label{ font-size:12px; font-weight:1000; opacity:.75; }
.nav-item.active .nav-label{ opacity:1; }

/* =============== Prep =============== */
.checklist-grid{ display:grid; gap:12px; }
.inline-add{ margin-top:10px; display:flex; gap:10px; align-items:center; }
.inline-add .btn{
  white-space: nowrap;   /* 文字不換行 => 不會變直排 */
  flex: 0 0 auto;        /* 按鈕不被壓扁 */
  min-width: 64px;       /* 給「新增」足夠寬度（可視需要調整 56~72） */
}
.list{ margin-top:10px; display:grid; gap:10px; }
.list-item{
  display:flex; gap:10px; align-items:center;
  background:#f7f4ee;
  border-radius:16px;
  padding:10px;
  text-decoration:none;
  color:inherit;
}
.todo{ display:flex; gap:10px; align-items:center; flex:1; min-width:0; font-weight:900; }
/* ✅ Prep：文字在手機自動換行，不再超出畫面 */
.todo span{
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  word-break: break-word;
  overflow-wrap: anywhere;
  line-height: 1.25;
  cursor: default;
  user-select: none;
}

/* 保留完成樣式 */
.todo span.done{
  text-decoration: line-through;
  opacity: .55;
}

.todo input[type="checkbox"] { cursor: pointer; }
/* =============== Modal =============== */
.modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.28);
  display:grid;
  place-items:center;
  padding:14px;
  z-index:50;
}
.modal{
  width:100%;
  max-width:520px;
  background:#fff;
  border-radius:20px;
  padding:14px;
  box-shadow:0 16px 40px rgba(0,0,0,.18);
}
.modal-title{ font-weight:1000; font-size:16px; }
.modal-subtitle{ margin-top:6px; font-weight:800; font-size:12px; opacity:.7; }
.modal-hint{ margin-top:10px; font-weight:800; font-size:12px; opacity:.65; }
.modal-actions{
  margin-top: 12px;
  display: flex;
  justify-content: flex-end; /* ✅ 按鈕靠右 */
  gap: 10px;                /* ✅ 按鈕間距 */
  flex-wrap: wrap;          /* ✅ 手機太窄時可換行，但仍靠右 */
}

/* ===================== 記帳頁：截圖風格 ===================== */
/* 分段切換 */
.segmented{
  margin:8px 0 12px 0;
  display:grid;
  grid-template-columns:1fr 1fr;
  background:#fff;
  border-radius:999px;
  padding:6px;
  box-shadow:0 10px 24px rgba(0,0,0,.06);
}
.seg-btn{
  border:0;
  border-radius:999px;
  padding:10px 12px;
  font-weight:1000;
  cursor:pointer;
  background:transparent;
  opacity:.75;
}
.seg-btn.active{
  background:#78b45a;
  color:#fff;
  opacity:1;
}

/* 記帳輸入卡 */
.acc-entry{ display:block; }
.acc-card{
  background:rgba(255,255,255,.85);
  border-radius:22px;
  padding:14px;
  box-shadow:0 12px 28px rgba(0,0,0,.08);
  border:2px solid rgba(0,0,0,.04);
}
.acc-card-title{
  font-weight:1000;
  font-size:15px;
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:12px;
}
.acc-field{ margin-top:10px; }
.acc-label{ font-size:12px; font-weight:1000; opacity:.7; margin-bottom:6px; }

.acc-input{
  width:100%;
  box-sizing:border-box;
  max-width:100%;
  min-width:0;

  border-radius:14px;
  border:2px solid rgba(0,0,0,.10);
  padding:12px 12px;
  font-size:14px;
  font-weight:900;
  outline:none;
  background:rgba(255,255,255,.9);
}

/* ✅ iOS/手機：date/time 常有內建最小寬度，強制不要撐出畫面 */
.acc-input[type="date"],
.acc-input[type="time"]{
  min-width:0;
  max-width:100%;

  /* ✅ iOS：避免文字上下被裁切（你截圖的「被吃邊界」） */
  height: 46px;
  line-height: 22px;

  /* ✅ iOS 對 date/time 的內建外觀常造成高度不一致 */
  -webkit-appearance: none;
  appearance: none;
}


/* ✅ 記帳：日期欄位外層也要能縮，避免 iOS date input 撐爆 */
.acc-date{
  width:100%;
  max-width:100%;
  min-width:0;
  overflow:hidden; /* 保險：就算瀏覽器硬撐，也不會溢出畫面 */
}

.acc-date .acc-input[type="date"]{
  display:block;   /* 避免 inline 元素的怪寬度行為 */
  width:100%;
}


.acc-grid-2{
  display:grid;
  grid-template-columns:minmax(0, 1fr) minmax(0, 1fr);
  gap:10px;
}

/* ✅ 讓 grid 子項目允許縮到欄寬內（避免被 input 最小寬度撐爆） */
.acc-grid-2 > *{
  min-width:0;
}


.acc-pills{ display:flex; gap:10px; flex-wrap:wrap; }
.acc-pill{
  border:2px solid rgba(0,0,0,.12);
  border-radius:14px;
  background:#fff;
  padding:10px 14px;
  font-weight:1000;
  cursor:pointer;
  opacity:.85;
}
.acc-pill.small{ padding:10px 12px; font-size:13px; }
.acc-pill.active{
  border-color:#39a6a1;
  box-shadow:0 0 0 3px rgba(57,166,161,.14) inset;
  opacity:1;
}

.acc-with-icon{ display:flex; gap:10px; align-items:center; }
.acc-icon{ width:24px; text-align:center; opacity:.7; font-weight:1000; }

.acc-members{ display:flex; gap:10px; flex-wrap:wrap; }
.member-pill{
  border:2px solid rgba(0,0,0,.10);
  background:#fff;
  border-radius:999px;
  padding:10px 14px;
  font-weight:1000;
  cursor:pointer;
  opacity:.8;
}
.member-pill.active{
  background:#78b45a;
  border-color:#78b45a;
  color:#fff;
  opacity:1;
}

.acc-actions{
  margin-top:14px;
  display:flex;
  justify-content:flex-end;
}
.acc-hint{
  margin-top:10px;
  font-size:12px;
  font-weight:900;
  opacity:.65;
}

/* 明細 */
.sum-card{
  background:#f3cf6b;
  border-radius:22px;
  padding:16px;
  box-shadow:0 12px 28px rgba(0,0,0,.10);
}
.sum-title{ font-size:12px; font-weight:1000; opacity:.7; }
.sum-amt{ margin-top:6px; font-size:34px; font-weight:1000; }
.sum-sub{
  margin-top:10px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.sum-sub-label{ font-size:12px; font-weight:1000; opacity:.75; }
.sum-sub-value{ margin-top:4px; font-size:14px; font-weight:1000; }

.detail-title{
  margin:14px 2px 10px 2px;
  font-weight:1000;
  font-size:16px;
}

.detail-filters{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  background:rgba(255,255,255,.8);
  border-radius:999px;
  padding:8px;
  border:2px solid rgba(0,0,0,.05);
}
.filter-pill{
  border:0;
  background:transparent;
  padding:8px 12px;
  border-radius:999px;
  font-weight:1000;
  cursor:pointer;
  opacity:.7;
}
.filter-pill.active{
  background:#78b45a;
  color:#fff;
  opacity:1;
}

.detail-groups{ margin-top:10px; display:grid; gap:12px; }
.group-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 6px;
  margin-bottom:6px;
}
.group-date{
  background:rgba(79,182,255,.18);
  color:#245a4f;
  border-radius:999px;
  padding:6px 10px;
  font-weight:1000;
  font-size:12px;
}
.group-subtotal{
  font-weight:1000;
  font-size:12px;
  opacity:.7;
}

.group-items{ display:grid; gap:10px; }

.detail-item{
  display:flex;
  gap:10px;
  align-items:center;
  background:rgba(255,255,255,.88);
  border-radius:18px;
  padding:12px;
  box-shadow:0 10px 24px rgba(0,0,0,.06);
  cursor:pointer;
}
.detail-item:active{ transform:scale(.995); }

.avatar{
  width:38px; height:38px;
  border-radius:999px;
  background:rgba(0,0,0,.06);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:1000;
}
.di-mid{ flex:1; min-width:0; }
.di-title{ font-weight:1000; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.di-meta{ margin-top:4px; font-size:12px; font-weight:900; opacity:.65; }
.di-dot{ margin:0 6px; opacity:.5; }

.di-right{ text-align:right; }
.di-amt{ font-weight:1000; font-size:14px; }
.di-approx{ margin-top:4px; font-weight:900; font-size:12px; opacity:.65; }

.detail-foot{ margin-top:12px; display:flex; justify-content:flex-end; }

.receipt-item{ cursor:pointer; }

/* =============== Countdown big card =============== */
.countdown-card{
  margin:-2px 0 14px 0;
  background:#ffffff;
  border-radius:22px;
  padding:16px 14px;
  box-shadow:0 10px 24px rgba(0,0,0,.06);
  border:2px solid rgba(79,182,255,.18);
  text-align:center;
}
.countdown-big{
  font-size:28px;
  font-weight:1000;
  letter-spacing:.8px;
}
.countdown-sub{
  margin-top:6px;
  font-size:12px;
  font-weight:900;
  opacity:.6;
}

/* =============== Day header row =============== */
.day-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  margin-bottom: 10px; /* ✅ 與第一個行程卡片拉開距離 */
}

.day-head-actions{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:flex-end;
  flex-wrap:wrap;
}
.readonly-hint{
  font-size:12px;
  font-weight:900;
  opacity:.65;
  line-height:1.35;
}

/* =============== Prep segmented 3 =============== */
.segmented-3{ grid-template-columns:repeat(3, 1fr); }
.segmented-4{ grid-template-columns:repeat(4, 1fr); }
.segmented-5{ grid-template-columns:repeat(5, 1fr); }
/* ✅ Prep：待辦/行李/購物 置頂（滑動時黏住） */
.prep-sticky{
  position: sticky;
  top: 0;
  z-index: 35;
  background: #f7f4ee; /* 你的頁面底色，避免滑動時透出 */
  padding: 8px 0 10px;
  margin: 0 0 8px;
  box-shadow: 0 10px 18px rgba(0,0,0,.06);
}

/* ✅ Booking：機票/住宿/租車/憑證 置頂（滑動時黏住） */
.booking-sticky{
  position: sticky;
  top: 0;
  z-index: 35;
  background: #f7f4ee; /* 與頁面底色一致，避免透出 */
  padding: 8px 0 10px;
  margin: 0 0 8px;
  box-shadow: 0 10px 18px rgba(0,0,0,.06);
}


/* =============== Tools: FX converter =============== */
.fx-row{
  display:grid;
  grid-template-columns:1fr 50px 1fr;
  gap:10px;
  align-items:end;
  margin-top:12px;
}
.fx-eq{
  height:44px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:1000;
  opacity:.65;
}
.fx-meta{
  margin-top:12px;
  padding:12px;
  border-radius:16px;
  background:rgba(79,182,255,.12);
  font-weight:1000;
}
.fx-meta-sub{
  margin-top:6px;
  font-size:12px;
  font-weight:900;
  opacity:.65;
}

.readonly-footnote{
  margin:14px 2px;
  padding:12px;
  border-radius:18px;
  background:rgba(255,255,255,.75);
  font-weight:900;
  opacity:.75;
}

.event-card{ user-select:none; }

/* =========================
   Icon Button（小圖示按鈕）
   ========================= */
.icon-btn {
  display: inline-flex;           /* 讓圖示置中 */
  align-items: center;            /* 垂直置中 */
  justify-content: center;        /* 水平置中 */
  width: 34px;                    /* 按鈕尺寸：好按、不佔位 */
  height: 34px;
  border-radius: 10px;            /* 圓角一致 */
  border: 1px solid rgba(0,0,0,0.12);
  background: #fff;               /* 乾淨背景 */
  cursor: pointer;
  padding: 0;                     /* 由 width/height 控制尺寸 */
  transition: transform .08s ease, box-shadow .12s ease, background .12s ease;
}

.icon-btn:active {
  transform: scale(0.97);         /* 點下去有回饋 */
}

.icon-btn:focus-visible {
  outline: 2px solid rgba(0,0,0,0.35); /* 鍵盤可及性 */
  outline-offset: 2px;
}

/* icon 大小 */
.icon-btn .icon {
  width: 18px;
  height: 18px;
}

/* 危險動作（清除） */
.icon-danger {
  color: #d32f2f;                 /* 圖示顏色（紅） */
}

.icon-danger:hover {
  background: rgba(211,47,47,0.08); /* hover 淡紅底提示 */
  box-shadow: 0 4px 14px rgba(0,0,0,0.08);
}

/* ===================== Booking（預定頁） ===================== */
.booking-list{
  margin-top:12px;
  display:grid;
  gap:12px;
}

.booking-card{
  background:rgba(255,255,255,.92);
  border-radius:24px;
  padding:14px;
  box-shadow:0 12px 28px rgba(0,0,0,.08);
  border:2px solid rgba(0,0,0,.04);
  cursor:pointer;
}

/* ===================== Backup（備用頁卡片：如範例圖） ===================== */
.backup-card{
  background: rgba(255,255,255,.92);
  border-radius: 28px;
  padding: 14px;
  box-shadow: 0 12px 28px rgba(0,0,0,.08);
  border: 2px solid rgba(0,0,0,.04);
  cursor: pointer;
}

/* ✅ Backup：手機不爆版（標題與按鈕允許換行） */
.backup-head{
  display:flex;
  align-items:flex-start;
  gap:12px;
  flex-wrap:wrap;
}

/* ✅ Backup：標題左側勾選 */
.backup-head-left{
  display:flex;
  align-items:flex-start;
  gap:10px;
  flex:1;
  min-width:0;
}

.backup-check{
  display:flex;
  align-items:center;
  justify-content:center;
  width:28px;
  height:28px;
  flex:0 0 28px;

  /* ❌ 移除外框與背景 */
  border:none;
  background:transparent;
}


.backup-check-input{
  width:18px;
  height:18px;
}

/* ✅ 勾選後：淡化但仍清楚可讀 */
.backup-title.is-done{
  opacity:.55;
  text-decoration: line-through;
}


.backup-pills{
  max-width: 100%;
}


.backup-title{
  flex: 1;
  min-width: 0;
  font-weight: 1000;
  font-size: 20px;
  letter-spacing: .2px;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  word-break: break-word;
  line-height: 1.2;
}


.backup-pills{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.backup-pill{
  background: #dbe9f6;
  border: 2px solid rgba(0,0,0,.06);
  border-radius: 999px;
  padding: 10px 16px;
  font-weight: 900;
  font-size: 16px;
  line-height: 1;
  cursor: pointer;
  box-shadow: 0 6px 14px rgba(0,0,0,.06);
}

.backup-pill.static{
  cursor: default;
}

.backup-pill:active{
  transform: translateY(1px);
}

.backup-field{
  margin-top: 10px;
  background: #fff;
  border-radius: 18px;
  padding: 12px 14px;
  border: 2px solid rgba(0,0,0,.08);
}

.bf-line1{
  font-weight: 900;
}

.bf-line2{
  margin-top: 6px;
  opacity: .70;
  font-weight: 800;
}

.muted{
  opacity: .65;
}

/* 手機更緊湊 */
@media (max-width: 420px){
  .backup-title{ font-size: 18px; }
  .backup-pill{ padding: 9px 14px; font-size: 15px; }
}


.booking-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.booking-vendor{
  font-weight:1000;
  opacity:.75;
  font-size:12px;
}

.booking-code{
  margin-top:10px;
  background:#f1f4fb;
  border-radius:18px;
  padding:12px;
  text-align:center;
  border:2px solid rgba(0,0,0,.03);
}
.booking-code-label{
  font-size:11px;
  font-weight:900;
  opacity:.55;
}
.booking-code-value{
  margin-top:6px;
  font-size:38px;
  font-weight:1000;
  letter-spacing:2px;
  color:#6a5b4c;
}

.flight-mid{
  margin-top:12px;
  background:#fff;
  border-radius:18px;
  padding:12px;
  border:2px solid rgba(0,0,0,.04);
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:10px;
  align-items:center;
}

.flight-col{
  text-align:center;
}
.flight-airport{
  font-size:22px;
  font-weight:1000;
  color:#6a5b4c;
}
.flight-time{
  margin-top:4px;
  font-size:14px;
  font-weight:900;
  opacity:.8;
}
.flight-chip{
  margin-top:8px;
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  font-size:11px;
  font-weight:1000;
  color:#fff;
}
.flight-chip.green{ background:#78b45a; }
.flight-chip.orange{ background:#f2a24a; }

.flight-center{
  text-align:center;
  opacity:.85;
}
.flight-duration{
  font-size:12px;
  font-weight:900;
  opacity:.7;
}
.flight-plane{
  margin-top:4px;
  font-size:18px;
}
.flight-date{
  margin-top:4px;
  font-size:12px;
  font-weight:900;
  opacity:.7;
}

.booking-simple{
  margin-top:12px;
  background:#fff;
  border-radius:18px;
  padding:12px;
  border:2px solid rgba(0,0,0,.04);
}
.booking-simple-title{
  font-weight:1000;
  font-size:14px;
}
.booking-simple-sub{
  margin-top:6px;
  font-weight:900;
  font-size:12px;
  opacity:.65;
}

.booking-meta{
  margin-top:12px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.meta-item{
  background:rgba(255,255,255,.95);
  border:2px solid rgba(0,0,0,.04);
  border-radius:16px;
  padding:10px;
  text-align:center;
}
.meta-label{
  font-size:11px;
  font-weight:900;
  opacity:.55;
}
.meta-value{
  margin-top:6px;
  font-size:13px;
  font-weight:1000;
  opacity:.85;
}

.booking-bottom{
  margin-top:12px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.booking-mini{
  background:rgba(255,255,255,.95);
  border:2px solid rgba(0,0,0,.04);
  border-radius:16px;
  padding:10px;
}
.mini-label{
  font-size:11px;
  font-weight:900;
  opacity:.55;
}
.mini-value{
  margin-top:6px;
  font-size:13px;
  font-weight:1000;
  opacity:.85;
}




/* =============== Prep drag handle =============== */
.drag-handle{
  width:32px;
  height:34px;
  border-radius:12px;
  border:2px solid rgba(0,0,0,.08);
  background:rgba(255,255,255,.7);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:1000;
  line-height:1;
  opacity:.75;
  cursor:grab;
  user-select:none;
}
.drag-handle:active{ cursor:grabbing; transform:scale(.98); }
.drag-handle:disabled{ opacity:.35; cursor:not-allowed; }

.list-item.dragging{
  opacity:.55;
  outline:2px dashed rgba(36,90,79,.25);
}

/* ===================== Booking UI v2 (match screenshot 2) ===================== */
.booking-card.booking-card2{
  max-width: 420px;
  margin: 14px auto;
  border-radius: 26px;
  overflow: hidden;
  background: #ffffff;
  border: 2px solid rgba(0,0,0,.05);
  box-shadow: 0 14px 30px rgba(0,0,0,.10);
}

/* 上方淡藍底 */
.booking-card.booking-card2 .bk2-topbar{
  background: #eaf2ff;
  padding: 14px 16px 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.booking-card.booking-card2 .bk2-airline{
  font-weight: 900;
  font-size: 13px;
  color: rgba(0,0,0,.55);
}

.booking-card.booking-card2 .bk2-mini-btn{
  border: 0;
  background: rgba(255,255,255,.85);
  border: 2px solid rgba(0,0,0,.05);
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 12px;
  cursor: pointer;
}

/* 大代碼區 */
.booking-card.booking-card2 .bk2-code{
  background: #eaf2ff;
  padding: 6px 16px 14px;
}

.booking-card.booking-card2 .bk2-code-text{
  background: rgba(255,255,255,.75);
  border: 2px solid rgba(0,0,0,.05);
  border-radius: 18px;
  padding: 10px 12px;
  text-align: center;
  font-size: 44px;
  font-weight: 1000;
  letter-spacing: 3px;
  color: #6a5b4c;
}

/* 航段白卡 */
.booking-card.booking-card2 .bk2-route{
  margin: 12px 16px 0;
  background: #fff;
  border-radius: 20px;
  border: 2px solid rgba(0,0,0,.05);
  padding: 14px 12px;
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  align-items: center;
  gap: 8px;
}

.booking-card.booking-card2 .bk2-col{
  text-align: center;
}

.booking-card.booking-card2 .bk2-iata{
  font-weight: 1000;
  font-size: 24px;
  color: #6a5b4c;
}

.booking-card.booking-card2 .bk2-time{
  margin-top: 4px;
  font-weight: 900;
  font-size: 14px;
  opacity: .85;
}

.booking-card.booking-card2 .bk2-chip{
  margin-top: 8px;
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  color: #fff;
  font-weight: 1000;
  font-size: 11px;
}

.booking-card.booking-card2 .bk2-chip-green{ background: #78b45a; }
.booking-card.booking-card2 .bk2-chip-orange{ background: #f2a24a; }

.booking-card.booking-card2 .bk2-mid{
  text-align: center;
  opacity: .85;
}

.booking-card.booking-card2 .bk2-duration{
  font-weight: 900;
  font-size: 12px;
  opacity: .7;
}

.booking-card.booking-card2 .bk2-plane{
  margin-top: 4px;
  font-size: 18px;
}

.booking-card.booking-card2 .bk2-date{
  margin-top: 4px;
  font-weight: 900;
  font-size: 12px;
  opacity: .7;
}

/* 非 flight */
.booking-card.booking-card2 .bk2-route-simple{
  grid-template-columns: 1fr;
  text-align: left;
}
.booking-card.booking-card2 .bk2-simple-title{
  font-weight: 1000;
  font-size: 14px;
}

.booking-card.booking-card2 .bk2-simple-sub{
  margin-top: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;

  font-weight: 900;
  font-size: 12px;
  opacity: .85;

  background: rgba(79,182,255,.10);
  border: 2px solid rgba(0,0,0,.05);
  border-radius: 14px;
  padding: 8px 10px;
}

.booking-card.booking-card2 .bk2-simple-sub-label{
  font-weight: 1000;
  opacity: .70;
  white-space: nowrap;
}

.booking-card.booking-card2 .bk2-simple-sub-date{
  font-weight: 1000;
  opacity: .95;
  text-align: right;
  min-width: 0;
}


.prep-edit-input{
  flex: 1;
  min-width: 0;
  border-radius: 12px;
  border: 2px solid rgba(0,0,0,.08);
  padding: 10px 12px;
  font-weight: 900;
  font-size: 16px; /* 手機避免 iOS 放大 */
  background: #fff;
}


/* 行李/機型列 */
.booking-card.booking-card2 .bk2-meta{
  margin: 12px 16px 0;
  background: rgba(255,255,255,.95);
  border: 2px solid rgba(0,0,0,.05);
  border-radius: 18px;
  padding: 12px 10px;
  display: grid;
  grid-template-columns: 1fr 12px 1fr;
  align-items: center;
  gap: 8px;
}

.booking-card.booking-card2 .bk2-meta-item{
  text-align: center;
}

.booking-card.booking-card2 .bk2-meta-label{
  font-weight: 1000;
  font-size: 11px;
  opacity: .55;
}

.booking-card.booking-card2 .bk2-meta-value{
  margin-top: 6px;
  font-weight: 1000;
  font-size: 13px;
  opacity: .85;
}

.booking-card.booking-card2 .bk2-meta-divider{
  width: 2px;
  height: 32px;
  background: rgba(0,0,0,.08);
  margin: 0 auto;
  border-radius: 999px;
}

/* 價格/購買日 */
.booking-card.booking-card2 .bk2-bottom{
  margin: 12px 16px 14px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.booking-card.booking-card2 .bk2-box{
  background: rgba(255,255,255,.95);
  border: 2px solid rgba(0,0,0,.05);
  border-radius: 18px;
  padding: 12px;
}

.booking-card.booking-card2 .bk2-box-label{
  font-weight: 1000;
  font-size: 11px;
  opacity: .55;
}

.booking-card.booking-card2 .bk2-box-value{
  margin-top: 8px;
  font-weight: 1000;
  font-size: 14px;
  opacity: .9;
}

.booking-card.booking-card2 .bk2-box-sub{
  margin-top: 4px;
  font-weight: 900;
  font-size: 11px;
  opacity: .55;
}





/* 手機：卡片更貼邊 */
@media (max-width: 420px){
  .booking-card.booking-card2{
    max-width: 100%;
    margin: 12px 10px;
  }
}


.bk2-top-actions{
  display:flex;
  gap:8px;
  align-items:center;
}

.voucher-row{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap; /* 小螢幕時可換行 */
}

/* ✅ 隱藏原生 file input（移除「未選擇任何檔案」那串） */
.voucher-file-hidden{
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* ✅ label 當按鈕用時的 disabled 狀態 */
.btn.is-disabled{
  opacity: .5;
  pointer-events: none;
}


/* 檔名/狀態顯示（未選擇/已選擇合一） */
.voucher-file-pill{
  font-weight:900;
  font-size:12px;
  opacity:.75;
  background: rgba(79,182,255,.12);
  border: 2px solid rgba(79,182,255,.18);
  border-radius: 999px;
  padding: 8px 12px;
}

/* ===================== Booking（住宿卡片：對齊你提供的截圖） ===================== */
.booking-stay-card{
  max-width: 430px;
  margin: 14px auto;
  border-radius: 28px;
  overflow: hidden;
  background: #f7f4ee;
  border: 2px solid rgba(0,0,0,.06);
  box-shadow: 0 18px 36px rgba(0,0,0,.12);
}

.stay-hero{
  position: relative;
  height: 200px;
  border-radius: 22px;   /* ✅ 封面圓角 */
  overflow: hidden;      /* ✅ 確保圖片/placeholder 也跟著圓角 */
}


.stay-hero-img,
.stay-hero-placeholder{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  border-radius: 22px; /* ✅ iOS/部分瀏覽器更穩 */
}


.stay-hero-placeholder{
  background: linear-gradient(135deg, rgba(79,182,255,.22), rgba(255,223,122,.22));
}

.stay-hero-overlay{
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 14px 14px 16px;
  background: linear-gradient(to top, rgba(0,0,0,.45), rgba(0,0,0,0));
}

.stay-chip{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(79,182,255,.95);
  color: #fff;
  font-weight: 900;
  font-size: 12px;
  line-height: 1;
  box-shadow: 0 10px 18px rgba(0,0,0,.12);
}

.stay-title{
  margin-top: 10px;
  color: #fff;
  font-weight: 1000;
  font-size: 26px;
  letter-spacing: .2px;
  text-shadow: 0 8px 18px rgba(0,0,0,.35);
}

.stay-hero-btn{
  position: absolute;
  top: 12px;
  right: 12px;
  width: 46px;
  height: 46px;
  border-radius: 999px;
  border: 0;
  background: rgba(0,0,0,.35);
  color: #fff;
  font-weight: 900;
  font-size: 12px;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.stay-body{
  padding: 14px;
}

.stay-dates{
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 10px;
  align-items: center;
}

/* ✅ 中間「X 晚」徽章 */
.stay-nights{
  background: rgba(46,155,143,.12);
  border: 2px solid rgba(46,155,143,.22);
  color: #2e9b8f;
  font-weight: 1000;
  font-size: 12px;
  padding: 10px 10px;
  border-radius: 999px;
  white-space: nowrap;
}


.stay-datebox{
  background: #fff;
  border: 2px solid rgba(0,0,0,.06);
  border-radius: 18px;
  padding: 10px 10px 12px;
  text-align: center;
}

.stay-date-label{
  font-size: 11px;
  font-weight: 900;
  opacity: .6;
  letter-spacing: .8px;
}

.stay-date{
  margin-top: 8px;
  font-weight: 1000;
  font-size: 18px;
}

.stay-time{
  margin-top: 6px;
  font-weight: 1000;
  font-size: 12px;
  color: #2e9b8f;
}

.stay-section{
  margin-top: 14px;
}

.stay-section-head{
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

/* ✅ 住宿卡片：地點資訊標題列 + 導航按鈕同一行（手機優先） */
.stay-section-head-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.stay-section-head-left{
  display:flex;
  align-items:center;
  gap:8px;
  min-width:0;
}



.stay-section-icon{
  width: 22px;
  height: 22px;
  display: grid;
  place-items: center;
  font-size: 16px;
}

.stay-section-title{
  font-weight: 1000;
  font-size: 14px;
}

.stay-address{
  background: #fff;
  border: 2px solid rgba(0,0,0,.06);
  border-radius: 18px;
  padding: 12px;
  font-weight: 900;
  opacity: .85;
  word-break: break-word;
}

/* ✅ 住宿卡片：地點文字 + 導航按鈕同一列 */
.stay-address-row{
  display: flex;
  align-items: center;
  gap: 10px;
}

/* 地點文字：可換行，但不把按鈕擠掉 */
.stay-address{
  flex: 1;
  min-width: 0;
  word-break: break-word;
  line-height: 1.4;
}

/* 導航按鈕：固定寬度、不換行 */
.stay-nav-btn{
  flex-shrink: 0;
  white-space: nowrap;
}


.stay-cost{
  background: rgba(255,223,122,.35);
  border: 2px solid rgba(242, 162, 74, .25);
  border-radius: 18px;
  padding: 12px;
}

.stay-cost-top{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  padding-bottom: 10px;
  border-bottom: 2px dashed rgba(0,0,0,.08);
}

.stay-cost-label{
  font-weight: 1000;
  font-size: 13px;
  color: rgba(0,0,0,.62);
}

.stay-cost-total{
  font-weight: 1200;
  font-size: 22px;
  letter-spacing: .3px;
}

.stay-cost-rows{
  margin-top: 10px;
  display: grid;
  gap: 8px;
}

.stay-cost-row{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  font-weight: 900;
  font-size: 13px;
}

.stay-cost-k{
  opacity: .72;
}

.stay-cost-row-green .stay-cost-v{
  color: #2e9b8f;
}

/* ✅ 統一「編輯資訊」按鈕外觀（住宿/機票一致） */
.bk2-edit-btn{
  border: 2px solid rgba(0,0,0,.06);
  background: rgba(255,255,255,.95);
  border-radius: 18px;
  padding: 12px 14px;
  font-weight: 1000;
  cursor: pointer;
}

/* 底部大按鈕（booking-card2：維持你原本的內縮） */
.booking-card.booking-card2 .bk2-edit-btn{
  width: calc(100% - 32px);
  margin: 0 16px 16px;
}

/* 住宿卡：同外觀，但用 stay-body 的內距做版面（不再變形） */
.booking-stay-card .bk2-edit-btn{
  width: 100%;
  margin: 12px 0 0;
}


/* ===== Itinerary: time on top, full width card ===== */

/* 保險：即使殘留，也強制不顯示時間軸元件 */
.time-rail,
.time-dot,
.time-line,
.time-railbar {
  display: none !important;
}

/* 每個行程項目：用直向排列，避免左右欄造成卡片變窄 */
.event-item {
  display: block;
}

/* 時間顯示在卡片上方 */
.event-time-top {
  font-size: 12px;
  color: #666;
  margin: 6px 0 4px;
  padding: 0 2px;
}

/* 卡片 + 筆記堆疊：滿版 */
.event-stack {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* 卡片本體：滿版 */
.event-card {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* 筆記（收合顯示那塊 note-between）同寬且可換行 */
.note-between {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}



/* 住宿卡片：訂位碼 + 憑證同列（訂位碼在左、憑證在右） */
.stay-hero-top{
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: space-between;
  z-index: 2;
}

.stay-code-badge{
  max-width: calc(100% - 76px); /* 右邊預留給「憑證」按鈕 */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Prep：文字換行 + 備註樣式 */
.prep-textwrap {
  flex: 1;
  min-width: 0;
}

.prep-text {
  white-space: normal;
  word-break: break-word;
  line-height: 1.25;
}

.prep-note {
  margin-top: 4px;
  font-size: 12px;
  color: #777;
  white-space: normal;
  word-break: break-word;
  line-height: 1.25;
}

/* Backup：標題下方小字（營業時間/備註） */
.backup-subline{
  margin-top: 6px;
  font-size: 12px;
  color: #666;
  font-weight: 800;
  white-space: normal;
  word-break: break-word;
  line-height: 1.25;
}

.backup-note{
  margin-top: 6px;
  font-size: 12px;
  color: #777;
  font-weight: 700;
  white-space: normal;
  word-break: break-word;
  line-height: 1.25;
}

/* ===================== Backup Snacks：圖片庫模式 ===================== */
.snack-gallery{
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

.snack-thumb{
  appearance: none;
  border: 0;
  padding: 0;
  background: transparent;
  width: 100%;
  aspect-ratio: 1 / 1;      /* ✅ 方形縮圖 */
  border-radius: 18px;      /* ✅ 圓角縮圖 */
  overflow: hidden;
  box-shadow: 0 10px 22px rgba(0,0,0,.10);
  cursor: pointer;
}

.snack-thumb:active{
  transform: scale(0.98);
}

.snack-thumb-img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* 超小螢幕：2欄更舒適 */
@media (max-width: 360px){
  .snack-gallery{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* Backup：標題下方小字（營業時間/備註） */
.backup-subline{
  margin-top: 6px;
  font-size: 12px;
  color: #666;
  font-weight: 800;
  white-space: normal;
  word-break: break-word;
  line-height: 1.25;
}

.backup-note{
  margin-top: 6px;
  font-size: 12px;
  color: #777;
  font-weight: 700;
  white-space: normal;
  word-break: break-word;
  line-height: 1.25;
}

.member-panel .card { margin-bottom: 12px; }
.member-panel .form-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}
.member-panel .field .label { font-size: 12px; opacity: .8; margin-bottom: 6px; }
.member-panel .input {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.checkline {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 10px 0;
  font-size: 13px;
}

.member-list { display: flex; flex-direction: column; gap: 10px; }
.member-row {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,.08);
}

.member-name { font-weight: 700; display: flex; align-items: center; gap: 8px; }
.badge {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.15);
}

.badge-owner{
  border-color: rgba(255, 165, 0, .45);
  background: rgba(255, 165, 0, .14);
  font-weight: 900;
}


.member-top{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  width: 100%;
}

.member-name{
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.member-name-text{
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.member-avatar{
  width: 28px;
  height: 28px;
  border-radius: 999px;
  overflow: hidden;
  flex: 0 0 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(0,0,0,.12);
  background: rgba(0,0,0,.04);
}

.member-avatar-img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.member-avatar-fallback{
  font-size: 12px;
  font-weight: 800;
  opacity: .85;
}

.perm-toggle{
  display:flex;
  justify-content:flex-end;
  flex:0 0 auto;
}

.toggle-switch{
  display:inline-flex;
  align-items:center;
  gap:8px;
  border:1px solid rgba(0,0,0,.15);
  background:#fff;
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  font-weight:800;
  line-height:1;
  white-space:nowrap;
}

.toggle-switch.disabled{
  opacity:.45;
}

.toggle-track{
  width:34px;
  height:18px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.18);
  background:rgba(0,0,0,.08);
  position:relative;
  display:inline-block;
  flex:0 0 auto;
}

.toggle-knob{
  width:14px;
  height:14px;
  border-radius:999px;
  background:#fff;
  border:1px solid rgba(0,0,0,.18);
  position:absolute;
  top:50%;
  left:2px;
  transform:translateY(-50%);
  transition:left .18s ease;
}

.toggle-switch.on .toggle-track{
  background:#e8f3ff;
}

.toggle-switch.on .toggle-knob{
  left:18px;
}

.toggle-label{
  min-width:48px;
  text-align:right;
}


.perm-btn{
  border: 1px solid rgba(0,0,0,.15);
  background: #fff;
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 800;
  line-height: 1;
  white-space: nowrap;
}

.perm-btn.active{
  background: #e8f3ff;
  border-color: rgba(0,0,0,.22);
}

.perm-btn:disabled{
  opacity: .45;
}


.member-meta { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; opacity: .8; }
.perm { font-size: 12px; opacity: .85; }

.member-actions { display: flex; gap: 8px; flex-wrap: wrap; }
.member-actions .btn { flex: 1; min-width: 120px; }

/* ===============================
   檔案選擇：按鈕 + 路徑同列顯示
   =============================== */

.file-picker-row {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
}

/* 選擇檔案按鈕：固定寬度 */
.file-picker-row .btn {
  flex-shrink: 0;
}

/* 藍色顯示區：吃滿剩餘空間 */
.voucher-file-pill {
  flex: 1;
  min-width: 0;

  padding: 6px 10px;
  background: #e8f3ff;
  border-radius: 999px;
  font-size: 12px;
  line-height: 1.2;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.option-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid #ddd;
  background: #fff;

  cursor: pointer;
}

.option-row.active {
  border-color: #f4c430; /* 你專案的黃色系 */
  background: #fff9e6;
}

.option-text {
  font-size: 15px;
  line-height: 1.3;
}

.option-sub {
  font-size: 12px;
  color: #888;
  margin-top: 2px;
}

.option-row input[type="checkbox"] {
  width: 18px;
  height: 18px;
}


.invite-box {
  margin-top: 12px;
  padding: 12px;
  border-radius: 14px;
  border: 1px solid #e6e6e6;
  background: #fff;
}

.invite-title {
  font-weight: 700;
  font-size: 14px;
  margin-bottom: 8px;
}

.invite-list {
  display: grid;
  gap: 8px;
}

.invite-row {
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid #eee;
  background: #fafafa;
}

.invite-email {
  font-size: 14px;
  font-weight: 600;
  word-break: break-word; /* ✅ 手機避免 email 撐爆 */
}

.invite-sub {
  margin-top: 2px;
  font-size: 12px;
  color: #777;
  word-break: break-word;
}


@media (max-width: 420px){
  .booking-stay-card{ border-radius: 24px; }
  .stay-title{ font-size: 22px; }
}

